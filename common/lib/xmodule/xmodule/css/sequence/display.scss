$seq-nav-border-color: $border-color !default;
$seq-nav-hover-color: rgb(245, 245, 245) !default;
$seq-nav-link-color: $link-color !default;
$seq-nav-icon-color: rgb(10, 10, 10) !default;
$seq-nav-icon-color-muted: rgb(140, 140, 140)!default;
$seq-nav-tooltip-color: rgb(51, 51, 51) !default;
$seq-nav-height: 50px;

// repeated extends - needed since LMS styling was referenced
.block-link {
  @include border-left(1px solid $seq-nav-border-color);

  display: block;

  &:hover,
  &:focus {
    background: none;
  }
}

.topbar {
  @include clearfix();

  border-bottom: 1px solid $seq-nav-border-color;

  @media print {
    display: none;
  }

  a {
    &.block-link {
      @include border-left(1px solid $seq-nav-border-color);

      display: block;

      &:hover,
      &:focus {
        background: none;
      }
    }
  }
}

%ui-clear-button {
  background-color: transparent;
  background-image: none;
  background-position: center 14px;
  background-repeat: no-repeat;
  border: none;
  border-radius: 0;
  background-clip: border-box;
  box-shadow: none;
  box-sizing: content-box;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
}

// ====================

.sequence-nav {
  @extend .topbar;

  margin: 0 auto $baseline;
  position: relative;
  border-bottom: none;
  z-index: 2;
  height: $seq-nav-height;
  display: flex;
  justify-content: center;
  align-items: center;
  border-bottom: solid 1px $border-color;

  @media print {
    display: none;
  }

  @include media-breakpoint-up(md) {
    margin-top: 20px;
    height: unset;
    position: sticky;
    float: left;
    justify-content: flex-start;
    flex-flow: column;
    top: 25%;
    width: 70px;
    border-bottom: 0;

    .sequence-nav-button{
      overflow-x: unset;
      white-space: unset;
      padding: unset;
      line-height: unset;
      font-size: unset;
      border: 0;
      background: none;
      transform: rotate(90deg);
      z-index: 1;

      .sequence-nav-button-label{
        display: none;
      }
    }

  .sequence-list-wrapper{
      #sequence-list{
        flex-flow: column;

        li {
          border: 0;
        }
      }
    }
  }

  .sequence-list-wrapper {
    @extend %ui-depth2;

    position: relative;
    flex-grow: 1;
    white-space: nowrap;

    @include media-breakpoint-up(md) {
      //overflow-x: scroll;
      height: unset;
      order: 2;
      overflow: unset;
      flex-grow: unset;
    }
  }

  ol {
    display: flex;

    li {
      box-sizing: border-box;
      min-width: 40px;
      flex-grow: 1;
      //border-color: $seq-nav-border-color;
      //border-width: 1px;
      //border-top-style: solid;
      display: inherit;
      justify-content: center;
      align-items: center;

      // &:not(:last-child) {
      //   @include border-right-style(solid);
      // }

      button {
        @extend %ui-fake-link;
        @extend %ui-clear-button;

        width: 80%;
        height: unset;
        position: relative;
        margin: 0;
        padding: 8px 12px;
        border-radius: 1.5rem;
        display: block;
        text-align: center;
        box-sizing: border-box;
        overflow: visible; // for tooltip - IE11 uses 'hidden' by default if width/height is specified

        .icon {
          display: inline-block;
          line-height: 100%; // This matches the height of the <a> its within (the parent) to get vertical centering.
          font-size: 110%;
          color: #888;
        }

        @include media-breakpoint-up(md) {
          border-radius: 50%;
          height: 45px;
          width: 45px;
          border-radius: 50%;
          margin: 5px;
          padding: 0;
          background: none;
          background: #f4f4f4;
          border: solid 1px #ccc;
        
          &.active,
          &:active{
            border-bottom: 0;
            border: solid 1px #ccc;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.15);
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05) inset;
            
            .icon{
              color: rgb(60, 60, 60);
            }
          }
        }

        .fa-bookmark {
          color: $seq-nav-link-color;
          font-size: 0.95rem;
          top: 12px;
          right: unset;

          @include media-breakpoint-up(md) {
            top: -2px;
            right: 1px;
          }
        }

        //video
        &.seq_video {
          .icon::before {
            content: "\f008"; // .fa-film
          }
        }

        //other
        &.seq_other {
          .icon::before {
            content: "\f02d"; // .fa-book
          }
        }

        //vertical
        &.seq_vertical {
          .icon::before {
            content: "\f00b";  // .fa-tasks
          }
        }

        //problems
        &.seq_problem {
          .icon::before {
            content: "\f044";  // .fa-pencil-square-o
          }
        }

        .sequence-tooltip {
          @include text-align(left);

          @extend %ui-depth2;

          margin-top: 12px;
          background: $seq-nav-tooltip-color;
          color: $white;
          font-family: $font-family-sans-serif;
          line-height: lh();
          right: 0;  // Should not be RTLed, tooltips do not move in RTL
          padding: 6px;
          position: absolute;
          top: 48px;
          text-shadow: 0 -1px 0 $black;
          white-space: pre;
          pointer-events: none;

          @include media-breakpoint-up(md) {
            right: unset;
            left: 0;
          }

          &:empty {
            background: none;

            &::after {
              display: none;
            }
          }

          &::after {
            @include transform(rotate(45deg));
            @include right(18px);

            background: $seq-nav-tooltip-color;
            content: " ";
            display: block;
            height: 10px;
            right: 18px;  // Not RTLed, positions tooltips relative to seq nav item
            position: absolute;
            top: -5px;
            width: 10px;

            
          @include media-breakpoint-up(md) {
            right: unset;
            left: 18px;
          }
          }
        }
      }
    }
  }

  body.touch-based-device & ol li button:hover p {
    display: none;
  }
}

.sequence-nav-button {
  @extend %ui-depth3;

  display: block;
  top: 0;
  width: 40px;
  height: 40px;
  border-radius: 2rem;
  text-shadow: none; // overrides default button text-shadow
  background: none;  // overrides default button gradient
  box-shadow: none;
  font-size: inherit;
  font-weight: normal;
  padding: 8px 12px;
  white-space: nowrap;
  overflow-x: hidden;
  border: 0;
  color: #888;
  
  // @include media-breakpoint-up(md) {
  //   min-width: 120px;
  //   max-width: 200px;
  //   text-overflow: ellipsis;

  //   span:not(:last-child) {
  //     @include padding-right($baseline / 2);
  //   }
  // }

  .sequence-nav-button-label {
    display: none;

    // @include media-breakpoint-up(md) {
    //   display: inline;
    // }
  }

  &.button-previous {
    order: -999;
  }

  &.button-next {
    order: 999;
  }

  &.disabled {
    cursor: normal;
  }
}

.seq_contents {
  display: none;
}

.sequence-bottom {
  position: relative;
  //height: 45px;
  padding: lh(2);
  display: flex;
  justify-content: center;
  bottom: 0;
  background: white;

  @include media-breakpoint-up(md) {
    margin-left: 70px;
    border-bottom-right-radius: 0.4rem;
  }
  
  .sequence-nav-button {
    position: relative;
    text-overflow: ellipsis;
    max-width: unset;
    border: 0;
    padding: 0 ($baseline * 0.8);
    background: none;
    width: unset;

    span{
      color: #888;
    }

    @include media-breakpoint-up(md) {
      &.focused,
      &:hover{
        padding-top: 0;
        border-bottom: 0;
      }
    }

    &:last-of-type {
      @include border-left(none);
    }

    @media print {
      display: none;
    }
  }
}

  #seq_content {
  &:focus,
  &:active {
    outline: none;
  }
}

// hover and active states
.sequence-nav-button,
.sequence-nav button {
  &.focused,
  &:hover {
    background-color: rgba(0, 0, 0, 0.1);

    span{
      color: rgb(60, 60, 60);
    }

    // @include media-breakpoint-up(sm) {
    //   border-bottom: 3px solid $seq-nav-link-color;
    //   background-color: theme-color("inverse");

    //   .icon {
    //     color: $seq-nav-icon-color;
    //   }
    // }
  }
}
